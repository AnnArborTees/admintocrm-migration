namespace :order do
  task create_crm_orders: :environment do
    Admin::Order.limit(10).each do |admin_order|
      byebug
      order = Order.create_from_admin_order(admin_order)
      order.create_shipment_from_admin_order(admin_order)
    end
  end

  task imprint_method_finder_test: :environment do 
    success, failure = 0, 0
    failures = File.open([Rails.root, 'failures.txt'].join("/"), 'w') 


    Admin::Job.joins(:order).where("created_at > '2015'").each do |aj|
      next if aj.order.title.include? "FBA" 
      job = Job.new_job_from_admin_job(aj)
      imprint_methods = job.determine_imprint_methods
      if imprint_methods.empty?
        failure +=1

      else
        success +=1
      end
    end
    
    puts "Success: #{success}, Failure: #{failure}"

  end

end
